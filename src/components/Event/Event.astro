---
import type { CollectionEntry } from 'astro:content';
import { Image } from 'astro:assets';

import EventTitle from '@/components/Event/EventTitle.astro';
import EventDetails from '@/components/Event/EventDetails.astro';
import EventTotal from '@/components/Event/EventTotal.astro';
import Reseller from '@/components/Payment/Reseller.astro';
import Internal from '@/components/Payment/Internal.astro';

interface Props {
	event: CollectionEntry<'events'>;
	reseller?: CollectionEntry<'resellers'>;
}

const { event, reseller } = Astro.props as Props;

const { image, title, description, producer, dates, location, price, commission } = event.data;
---

<section
	id="product-card"
	class="flex flex-col gap-4 px-4 py-4 justify-center items-stretch bg-white rounded-3xl shadow-sm border border-gray-200 max-w-lg"
>
	<Image src={image.blob} alt={image.alt} class="rounded-2xl shadow-sm" />
	<section id="content" class="contents">
		<EventTitle title={title} description={description} />
		<!-- Event details-->
		<EventDetails producer={producer} dates={dates} location={location} />
	</section>
	<EventTotal price={price.toFixed(2)} commission={commission.toFixed(2)} />
	{reseller ? <Reseller {reseller} {event} /> : <Internal {event} />}
</section>
